(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6114609e"],{aa55:function(t,e,a){},b7ba:function(t,e){t.exports={messages:{CN:{form:{platform:"平台",tags:"标签",title:"标题",published_at:"发布时间",info_at:"信息时间"}},HK:{form:{platform:"平台",title:"标题",tags:"标签",published_at:"发布时间",info_at:"信息时间"}},US:{form:{platform:"Platform",title:"Title",tags:"Tag",published_at:"Publish Time",info_at:"Information Time"}}}}},cccf:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("page-layout",[a("a-card",{staticClass:"action-bar no-padding-top",attrs:{bordered:!1}},[a("a-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.$router.push({path:"/article/create"})}}},[t._v(" 写点什么 ... ")]),t.tags.length?a("div",{staticClass:"tag"},[a("a-checkable-tag",{staticClass:"pointer",attrs:{checked:!t.checkedTag},on:{change:function(e){return t.tagChange("",e)}}},[t._v(" 全部 ")]),t._l(t.tags,(function(e){return a("a-checkable-tag",{key:e,staticClass:"pointer",attrs:{checked:t.checkedTag===e},on:{change:function(a){return t.tagChange(e,a)}}},[t._v(" "+t._s(e)+" ")])}))],2):t._e(),a("div",{staticClass:"status"},[a("a-checkable-tag",{staticClass:"pointer",attrs:{checked:"undefined"===typeof t.checkedStatus},on:{change:function(e){return t.indexStatusChange(void 0,e)}}},[t._v(" 全部 ")]),t._l(t.statuses,(function(e){return a("a-checkable-tag",{key:e.key,staticClass:"pointer",attrs:{checked:t.checkedStatus===e.key},on:{change:function(a){return t.indexStatusChange(e.key,a)}}},[t._v(" "+t._s(e.value)+" ")])}))],2)],1),a("a-card",{attrs:{bordered:!1}},[a("a-list",{attrs:{"item-layout":"vertical",loading:t.loading,"data-source":t.items,bordered:!1},scopedSlots:t._u([{key:"renderItem",fn:function(e){return a("a-list-item",{key:"item.slug",staticClass:"list-item"},[a("template",{slot:"extra"},[a("a-space",[a("a-icon",{attrs:{type:"edit",title:t.$t("edit")},on:{click:function(a){return t.turnUpdate(e.id)}}}),a("a-divider",{attrs:{type:"vertical"}}),a("a-icon",{attrs:{type:"ellipsis",title:t.$t("status")},on:{click:function(a){return t.statusModalClick(e.id)}}})],1)],1),a("div",{staticClass:"title"},[t._v(" "+t._s(e.title)+" ")]),a("div",{staticClass:"info-at"},[t._v(" "+t._s(e.info_at)+" ")]),e.tags.length?a("div",{staticClass:"tag"},[a("a-space",t._l(e.tags,(function(e){return a("a-tag",{key:e,staticClass:"pointer",attrs:{color:"red"},on:{click:function(a){return t.tagChange(e,!0)}}},[t._v(" "+t._s(e)+" ")])})),1)],1):t._e()],2)}}])})],1),a("a-card",{attrs:{bordered:!1}},[a("a-pagination",{attrs:{size:"small",current:t.page,"page-size":t.per_page,total:t.total,"page-size-options":t.pageSizeOptions,"show-size-changer":!0,"show-less-items":!0},on:{change:t.onPageChange,showSizeChange:t.onSizeChange},scopedSlots:t._u([{key:"buildOptionText",fn:function(e){return[a("span",[t._v(t._s(e.value))])]}}])})],1),a("a-modal",{attrs:{title:t.$t("status"),visible:t.statusModalVisible,"confirm-loading":t.statusLoading},on:{ok:t.statusOK,cancel:t.statusCancel}},[a("a-form-model",[a("a-form-model-item",[a("a-select",{attrs:{value:t.current.status},on:{change:t.statusChange}},t._l(t.statuses,(function(e){return a("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(t._s(e.value))])})),1)],1)],1)],1)],1)},s=[],r=(a("4160"),a("159b"),a("96cf"),a("c964")),i=a("45eb"),c=a("dde5"),u={name:"Article",components:{PageLayout:i["a"]},i18n:a("b7ba"),data:function(){return{loading:!1,items:[],page:1,per_page:10,total:0,conditions:{},pagination:{},pageSizeOptions:["10","20"],syncLoading:!1,statusModalVisible:!1,statusLoading:!1,statuses:[],tags:[],currentId:0,current:{},checkedTag:"",checkedStatus:2}},created:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getTags(),e.next=3,t.getStatuses();case 3:return e.next=5,t.index();case 5:case"end":return e.stop()}}),e)})))()},methods:{index:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n,s,r,i,u,o,d,l,g;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,a=t.page,n=t.per_page,s=t.checkedTag,r=t.checkedStatus,e.next=4,c["a"].index({page:a,per_page:n,tag:s,status:r});case 4:i=e.sent,u=i.data.data,o=u.items,d=u.page,l=u.per_page,g=u.total_count,t.items=o,t.page=d,t.per_page=l,t.total=g,t.loading=!1;case 11:case"end":return e.stop()}}),e)})))()},onSearch:function(t){this.page=1,this.conditions=t,this.index()},onSizeChange:function(t,e){this.page=1,this.per_page=e,this.index()},onRefresh:function(t){this.conditions=t,this.index()},onReset:function(t){this.conditions=t,this.index()},onPageChange:function(t,e){this.page=t,this.per_page=e,this.index()},turnUpdate:function(t){this.$router.push({path:"/article/update",query:{id:t}})},edit:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,c["a"].edit(t);case 2:n=a.sent,0===n.data.code&&(s=n.data.data.item,e.current={status:s.status});case 4:case"end":return a.stop()}}),a)})))()},update:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].update(t.currentId,t.current);case 2:a=e.sent,0===a.data.code?t.$message.success(t.$t("result.success")):t.$message.error(a.data.msg?a.data.msg:t.$t("result.error"));case 4:case"end":return e.stop()}}),e)})))()},getStatuses:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].statuses();case 2:a=e.sent,0===a.data.code&&(t.statuses=a.data.data.items);case 4:case"end":return e.stop()}}),e)})))()},getTags:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].tags();case 2:a=e.sent,0===a.data.code&&(t.tags=a.data.data.items);case 4:case"end":return e.stop()}}),e)})))()},tagToObj:function(t){var e=[];return t.forEach((function(t){e.push({title:t,value:t})})),e},statusChange:function(t){this.current.status=t},statusModalClick:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.statusModalVisible=!e.statusModalVisible,!e.statusModalVisible){a.next=7;break}return e.currentId=t,a.next=5,e.edit(t);case 5:a.next=9;break;case 7:e.currentId=0,e.current={};case 9:case"end":return a.stop()}}),a)})))()},statusOK:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.update();case 2:return t.statusModalVisible=!1,e.next=5,t.index();case 5:case"end":return e.stop()}}),e)})))()},statusCancel:function(){this.statusModalVisible=!1,this.currentId=0,this.current={}},tagChange:function(t,e){this.checkedTag=e?t:"",this.index()},indexStatusChange:function(t,e){this.checkedStatus=e?t:void 0,this.index()}}},o=u,d=(a("dec6"),a("2877")),l=Object(d["a"])(o,n,s,!1,null,"7149fa3a",null);e["default"]=l.exports},dec6:function(t,e,a){"use strict";a("aa55")}}]);
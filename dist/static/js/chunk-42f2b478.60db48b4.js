(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42f2b478"],{"65ee":function(e,t,a){},"9d6d":function(e,t,a){"use strict";a("65ee")},"9fda":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-card",{staticClass:"action-bar",attrs:{bordered:!1}},[a("a-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.drawOpen(!1)}}},[e._v(" "+e._s(e.$t("add"))+" ")]),a("div",{staticClass:"tag"},[a("a-checkable-tag",{staticClass:"pointer",attrs:{checked:!e.checkedTag.length},on:{change:function(t){return e.indexTagChange(void 0,t)}}},[e._v(" 全部 ")]),e._l(e.tags,(function(t){return a("a-checkable-tag",{key:t.id,staticClass:"pointer",attrs:{checked:e.checkedTag.includes(t.id)},on:{change:function(a){return e.indexTagChange(t,a)}}},[e._v(" "+e._s(t.name)+" ")])}))],2),a("div",{staticClass:"status"},[a("a-checkable-tag",{staticClass:"pointer",attrs:{checked:"undefined"===typeof e.checkedStatus},on:{change:function(t){return e.indexStatusChange(void 0,t)}}},[e._v(" 全部 ")]),e._l(e.statuses,(function(t){return a("a-checkable-tag",{key:t.key,staticClass:"pointer",attrs:{checked:e.checkedStatus===t.key},on:{change:function(a){return e.indexStatusChange(t.key,a)}}},[e._v(" "+e._s(t.value)+" ")])}))],2)],1),a("a-card",{attrs:{bordered:!1}},[a("a-list",{attrs:{"item-layout":"vertical",loading:e.loading,"data-source":e.items,bordered:!1},scopedSlots:e._u([{key:"renderItem",fn:function(t){return a("a-list-item",{key:"item.slug",staticClass:"list-item"},[a("template",{slot:"extra"},[a("a-space",[a("a-icon",{attrs:{type:"edit",title:e.$t("edit")},on:{click:function(a){return e.drawOpen(!0,t.id)}}})],1)],1),a("div",{staticClass:"title"},[e._v(" "+e._s(t.name)+" ")])],2)}}])})],1),a("a-card",{attrs:{bordered:!1}},[a("a-pagination",{attrs:{size:"small",current:e.page,"page-size":e.limit,total:e.total,"page-size-options":e.pageSizeOptions,"show-size-changer":!0,"show-less-items":!0},on:{change:e.onPageChange,showSizeChange:e.onSizeChange},scopedSlots:e._u([{key:"buildOptionText",fn:function(t){return[a("span",[e._v(e._s(t.value))])]}}])})],1),a("a-drawer",{attrs:{title:e.editMode?e.$t("edit"):e.$t("add"),width:720,visible:e.drawVisible,"body-style":{paddingBottom:"80px"}},on:{close:e.drawClose}},[a("a-form-model",{ref:"drawerForm",attrs:{model:e.form,rules:e.rules,layout:"vertical"}},[a("a-form-model-item",{attrs:{label:"名称",prop:"name"}},[a("a-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("a-form-model-item",{attrs:{label:"版本",prop:"version"}},[a("a-input",{model:{value:e.form.version,callback:function(t){e.$set(e.form,"version",t)},expression:"form.version"}})],1),a("a-form-model-item",{attrs:{label:"简介",prop:"description"}},[a("a-input",{model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),a("a-form-model-item",{attrs:{label:"网站",prop:"site_url"}},[a("a-input",{model:{value:e.form.site_url,callback:function(t){e.$set(e.form,"site_url",t)},expression:"form.site_url"}})],1),a("a-form-model-item",{attrs:{label:"下载",prop:"download_url"}},[a("a-input",{model:{value:e.form.download_url,callback:function(t){e.$set(e.form,"download_url",t)},expression:"form.download_url"}})],1),a("a-form-model-item",{attrs:{label:"标签",prop:"tags"}},[a("a-select",{staticStyle:{width:"100%"},attrs:{mode:"multiple",value:e.form.tags,placeholder:"Please select"},on:{change:e.formTagChange}},e._l(e.tags,(function(t){return a("a-select-option",{key:t.id},[e._v(" "+e._s(t.name)+" ")])})),1)],1),a("a-form-model-item",{attrs:{label:"扩展",prop:"download_url"}},[a("a-textarea",{attrs:{rows:4},model:{value:e.form.extend,callback:function(t){e.$set(e.form,"extend",t)},expression:"form.extend"}})],1),a("a-form-model-item",{attrs:{label:"状态"}},[a("a-select",{attrs:{"dropdown-class-name":"item-min-width",value:e.form.status},on:{change:e.formStatusChange}},e._l(e.statuses,(function(t){return a("a-select-option",{key:t.key,attrs:{value:t.key}},[e._v(e._s(t.value))])})),1)],1)],1),a("div",{staticClass:"form-action"},[a("a-space",{attrs:{size:16}},[a("a-button",{attrs:{disabled:e.submitLoading},on:{click:e.drawClose}},[e._v(" "+e._s(e.$t("cancel"))+" ")]),a("a-button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:e.formSubmit}},[e._v(" "+e._s(e.$t("submit"))+" ")])],1)],1)],1)],1)},r=[],s=(a("a15b"),a("f3f3")),i=(a("96cf"),a("c964")),o=a("dde5"),c=a("2ef0"),d=a.n(c),u={name:"Software",i18n:a("c6b5"),data:function(){var e=100;return{loading:!1,items:[],page:1,offset:0,limit:e,total:0,pagination:{},pageSizeOptions:[String(e),String(2*e)],statuses:[],tags:[],checkedStatus:1,checkedTag:[],current:{},editMode:!1,drawVisible:!1,submitLoading:!1,formInit:{name:"",status:1,site_url:"",download_url:"",description:"",version:"",tags:[],extend:""},form:{name:"",status:1,site_url:"",download_url:"",description:"",version:"",tags:[],extend:""},rules:{name:[{required:!0,message:"标签是啥",trigger:"blur"}]}}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getStatuses();case 2:return t.next=4,e.getTags();case 4:return t.next=6,e.index();case 6:case"end":return t.stop()}}),t)})))()},methods:{onSizeChange:function(e,t){this.page=e,this.offset=(e-1)*t,this.limit=this.offset+t,this.index()},onPageChange:function(e,t){this.page=e,this.offset=(e-1)*t,this.limit=this.offset+t,this.index()},index:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,r,s,i,c,d,u,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,a=e.offset,n=e.limit,r=e.checkedStatus,s=e.checkedTag,i="",s&&(i=s.join(",")),t.next=6,o["e"].index({offset:a,limit:n,status:r,tag:i});case 6:c=t.sent,0===c.data.code&&(d=c.data.data,u=d.items,l=d.totalCount,e.items=u,e.total=l),e.loading=!1;case 9:case"end":return t.stop()}}),t)})))()},indexStatusChange:function(e,t){this.checkedStatus=t?e:void 0,this.index()},indexTagChange:function(e,t){t?"undefined"===typeof e?this.checkedTag=[]:this.checkedTag.push(e.id):d.a.pull(this.checkedTag,e.id),this.index()},initIndex:function(){this.page=1,this.offset=0,this.index()},getStatuses:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["e"].statuses();case 2:a=t.sent,0===a.data.code&&(e.statuses=a.data.data.items);case 4:case"end":return t.stop()}}),t)})))()},getTags:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["f"].index({offset:0,limit:100});case 2:a=t.sent,0===a.data.code&&(e.tags=a.data.data.items);case 4:case"end":return t.stop()}}),t)})))()},edit:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,o["e"].edit(e);case 2:n=a.sent,0===n.data.code&&(r=n.data.data.item,r.extend&&(r.extend=JSON.stringify(r.extend)),t.current=r,t.form=r);case 4:case"end":return a.stop()}}),a)})))()},drawOpen:function(){var e=arguments,t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=e.length>0&&void 0!==e[0]&&e[0],r=e.length>1&&void 0!==e[1]?e[1]:0,t.editMode=Boolean(n),t.form=Object(s["a"])({},t.formInit),!t.editMode){a.next=7;break}return a.next=7,t.edit(r);case 7:t.drawVisible=!0;case 8:case"end":return a.stop()}}),a)})))()},drawClose:function(){this.$refs.drawerForm.resetFields(),this.form=Object(s["a"])({},this.formInit),this.editMode=!1,this.current={},this.drawVisible=!1},formStatusChange:function(e){this.form.status=e},formTagChange:function(e){this.form.tags=e},formSubmit:function(){var e=this;this.$refs.drawerForm.validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(a){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=18;break}if(n=Object(s["a"])({},e.form),n.extend=JSON.parse(n.extend),e.submitLoading=!0,r={},!e.editMode){t.next=11;break}return t.next=8,o["e"].update(Object(s["a"])({id:e.current.id},n));case 8:r=t.sent,t.next=14;break;case 11:return t.next=13,o["e"].create(n);case 13:r=t.sent;case 14:e.submitLoading=!1,0===r.data.code?(e.$message.success(e.$t("result.success")),e.$refs.drawerForm.resetFields(),e.editMode&&e.drawClose(),e.initIndex()):e.$message.error(r.data.msg?r.data.msg:e.$t("result.error")),t.next=19;break;case 18:return t.abrupt("return",!1);case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},l=u,m=(a("9d6d"),a("2877")),f=Object(m["a"])(l,n,r,!1,null,"03b6e216",null),g=f.exports;t["default"]=g},c6b5:function(e,t){e.exports={messages:{CN:{form:{platform:"平台",tags:"标签",title:"标题",published_at:"发布时间",info_at:"信息时间"}},HK:{form:{platform:"平台",title:"标题",tags:"标签",published_at:"发布时间",info_at:"信息时间"}},US:{form:{platform:"Platform",title:"Title",tags:"Tag",published_at:"Publish Time",info_at:"Information Time"}}}}}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-76c9d9de"],{"48cf":function(t,e,a){},"74a8":function(t,e){t.exports={messages:{CN:{form:{platform:"平台",tags:"标签",title:"标题",published_at:"发布时间",info_at:"信息时间"}},HK:{form:{platform:"平台",title:"标题",tags:"标签",published_at:"发布时间",info_at:"信息时间"}},US:{form:{platform:"Platform",title:"Title",tags:"Tag",published_at:"Publish Time",info_at:"Information Time"}}}}},aa0b:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-card",{staticClass:"action-bar no-padding-top",attrs:{bordered:!1}},[a("a-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.drawOpen(!1)}}},[t._v(" "+t._s(t.$t("add"))+" ")]),a("div",{staticClass:"status"},[a("a-checkable-tag",{staticClass:"pointer",attrs:{checked:"undefined"===typeof t.checkedStatus},on:{change:function(e){return t.indexStatusChange(void 0,e)}}},[t._v(" 全部 ")]),t._l(t.statuses,(function(e){return a("a-checkable-tag",{key:e.key,staticClass:"pointer",attrs:{checked:t.checkedStatus===e.key},on:{change:function(a){return t.indexStatusChange(e.key,a)}}},[t._v(" "+t._s(e.value)+" ")])}))],2)],1),a("a-card",{attrs:{bordered:!1}},[a("a-list",{attrs:{"item-layout":"vertical",loading:t.loading,"data-source":t.items,bordered:!1},scopedSlots:t._u([{key:"renderItem",fn:function(e){return a("a-list-item",{key:"item.slug",staticClass:"list-item"},[a("template",{slot:"extra"},[a("a-space",[a("a-icon",{attrs:{type:"edit",title:t.$t("edit")},on:{click:function(a){return t.drawOpen(!0,e.id)}}})],1)],1),a("div",{staticClass:"title"},[t._v(" "+t._s(e.name)+" ")])],2)}}])})],1),a("a-card",{attrs:{bordered:!1}},[a("a-pagination",{attrs:{size:"small",current:t.page,"page-size":t.limit,total:t.total,"page-size-options":t.pageSizeOptions,"show-size-changer":!0,"show-less-items":!0},on:{change:t.onPageChange,showSizeChange:t.onSizeChange},scopedSlots:t._u([{key:"buildOptionText",fn:function(e){return[a("span",[t._v(t._s(e.value))])]}}])})],1),a("a-drawer",{attrs:{title:t.editMode?t.$t("edit"):t.$t("add"),width:720,visible:t.drawVisible,"body-style":{paddingBottom:"80px"}},on:{close:t.drawClose}},[a("a-form-model",{ref:"drawerForm",attrs:{model:t.form,rules:t.rules,layout:"vertical"}},[a("a-form-model-item",{attrs:{label:"标题",prop:"name"}},[a("a-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("a-form-model-item",{attrs:{label:"状态"}},[a("a-select",{attrs:{"dropdown-class-name":"item-min-width",value:t.form.status},on:{change:t.formStatusChange}},t._l(t.statuses,(function(e){return a("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(t._s(e.value))])})),1)],1)],1),a("div",{staticClass:"form-action"},[a("a-space",{attrs:{size:16}},[a("a-button",{attrs:{disabled:t.submitLoading},on:{click:t.drawClose}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),a("a-button",{attrs:{type:"primary",loading:t.submitLoading},on:{click:t.formSubmit}},[t._v(" "+t._s(t.$t("submit"))+" ")])],1)],1)],1)],1)},r=[],s=(a("b0c0"),a("f3f3")),i=(a("96cf"),a("c964")),o=a("dde5"),c={name:"SoftwareTag",i18n:a("74a8"),data:function(){var t=100;return{loading:!1,items:[],page:1,offset:0,limit:t,total:0,pagination:{},pageSizeOptions:[String(t),String(2*t)],statuses:[],checkedStatus:1,current:{},editMode:!1,drawVisible:!1,submitLoading:!1,form:{name:"",status:1},rules:{name:[{required:!0,message:"标签是啥",trigger:"blur"}]}}},created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getStatuses();case 2:return e.next=4,t.index();case 4:case"end":return e.stop()}}),e)})))()},methods:{onSizeChange:function(t,e){this.page=t,this.offset=(t-1)*e,this.limit=e,this.index()},onPageChange:function(t,e){this.page=t,this.offset=(t-1)*e,this.limit=e,this.index()},index:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,r,s,i,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,a=t.offset,n=t.limit,r=t.checkedStatus,e.next=4,o["g"].index({offset:a,limit:n,status:r});case 4:s=e.sent,0===s.data.code&&(i=s.data.data,c=i.items,u=i.totalCount,t.items=c,t.total=u),t.loading=!1;case 7:case"end":return e.stop()}}),e)})))()},indexStatusChange:function(t,e){this.checkedStatus=e?t:void 0,this.index()},initIndex:function(){this.page=1,this.offset=0,this.index()},getStatuses:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o["g"].statuses();case 2:a=e.sent,0===a.data.code&&(t.statuses=a.data.data.items);case 4:case"end":return e.stop()}}),e)})))()},edit:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,o["g"].edit(t);case 2:n=a.sent,0===n.data.code&&(r=n.data.data.item,e.current=r,e.form.name=r.name,e.form.status=r.status);case 4:case"end":return a.stop()}}),a)})))()},drawOpen:function(){var t=arguments,e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=t.length>0&&void 0!==t[0]&&t[0],r=t.length>1&&void 0!==t[1]?t[1]:0,e.editMode=Boolean(n),!e.editMode){a.next=6;break}return a.next=6,e.edit(r);case 6:e.drawVisible=!0;case 7:case"end":return a.stop()}}),a)})))()},drawClose:function(){this.drawVisible=!1,this.$refs.drawerForm.resetFields(),this.current={}},formStatusChange:function(t){this.form.status=t},formSubmit:function(){var t=this;this.$refs.drawerForm.validate(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=16;break}if(t.submitLoading=!0,n={},!t.editMode){e.next=9;break}return e.next=6,o["g"].update(Object(s["a"])({id:t.current.id},t.form));case 6:n=e.sent,e.next=12;break;case 9:return e.next=11,o["g"].create(t.form);case 11:n=e.sent;case 12:t.submitLoading=!1,0===n.data.code?(t.$message.success(t.$t("result.success")),t.$refs.drawerForm.resetFields(),t.editMode&&(t.current={}),t.initIndex()):t.$message.error(n.data.msg?n.data.msg:t.$t("result.error")),e.next=17;break;case 16:return e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}},u=c,d=(a("b0b5"),a("2877")),l=Object(d["a"])(u,n,r,!1,null,"e8eae06c",null),m=l.exports;e["default"]=m},b0b5:function(t,e,a){"use strict";a("48cf")}}]);
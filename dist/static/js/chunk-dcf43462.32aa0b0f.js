(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dcf43462"],{3990:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-card",{attrs:{bordered:!1}},[r("div",[r("div",{staticClass:"operator"},[r("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.showAdd(0)}}},[e._v(e._s(e.$t("add")))])],1),r("a-table",{attrs:{"row-key":"id","data-source":e.items,columns:e.columns,pagination:e.pagination,scroll:{x:1e3},bordered:!0,"indent-size":5,"default-expand-all-rows":!0},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"name",fn:function(t,a){return r("span",{},[e._v(" "+e._s(e.nameFormat(a))+" ")])}},{key:"common",fn:function(t){return r("span",{},[e._v(" "+e._s(t||"-")+" ")])}},{key:"status",fn:function(t){return r("span",{},[r("a-tag",{attrs:{color:e.statuses[t].color}},[e._v(" "+e._s(e.statuses[t].value)+" ")])],1)}},{key:"action",fn:function(t,a){return r("span",{},[0===a.parent_id?[r("a",{on:{click:function(t){return e.showAdd(a.id)}}},[e._v(e._s(e.$t("add")))]),r("a-divider",{attrs:{type:"vertical"}})]:e._e(),r("a",{on:{click:function(t){return e.showEdit(a.id)}}},[e._v(e._s(e.$t("edit")))]),r("a-divider",{attrs:{type:"vertical"}}),r("a-popconfirm",{attrs:{title:e.$t("delConfirm"),"ok-text":"Yes","cancel-text":"No"},on:{confirm:function(t){return e.destroy(a.id)}}},[r("a",{attrs:{href:"#"}},[e._v(e._s(e.$t("delete")))])])],2)}}])}),r("a-drawer",{attrs:{title:e.$emptyObj(e.current)?e.$t("add"):e.$t("edit"),width:720,visible:e.drawerVisible,"body-style":{paddingBottom:"80px"}},on:{close:e.drawerClose}},[r("a-form-model",{ref:"drawerForm",attrs:{model:e.form,rules:e.rules,layout:"vertical"}},[r("a-row",{attrs:{gutter:16}},[r("a-col",{attrs:{span:24}},[r("a-form-model-item",{ref:"name",attrs:{label:e.$t("form.parent_id"),prop:"parent_id"}},[r("a-select",{model:{value:e.form.parent_id,callback:function(t){e.$set(e.form,"parent_id",t)},expression:"form.parent_id"}},[r("a-select-option",{attrs:{value:0}},[e._v(" - ")]),e._l(e.roots,(function(t){return r("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(" "+e._s(e.nameFormat(t))+" ")])}))],2)],1)],1)],1),r("a-row",{attrs:{gutter:16}},[r("a-col",{attrs:{span:24}},[r("a-form-model-item",{attrs:{label:e.$t("form.code"),prop:"code"}},[r("a-input",{model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1)],1)],1),r("a-row",{attrs:{gutter:16}},[r("a-col",{attrs:{span:24}},[r("a-form-model-item",{attrs:{label:e.$t("form.value_type"),prop:"value_type"}},[r("a-select",{model:{value:e.form.value_type,callback:function(t){e.$set(e.form,"value_type",t)},expression:"form.value_type"}},e._l(e.valueTypes,(function(t){return r("a-select-option",{key:t.key,attrs:{value:t.key}},[e._v(" "+e._s(t.value)+" ")])})),1)],1)],1)],1),r("a-row",{attrs:{gutter:16}},[r("a-col",{attrs:{span:24}},[r("a-form-model-item",{attrs:{label:e.$t("form.value"),prop:"value"}},[r("a-textarea",{attrs:{rows:4},model:{value:e.form.value,callback:function(t){e.$set(e.form,"value",t)},expression:"form.value"}})],1)],1)],1),r("a-row",{attrs:{gutter:16}},[r("a-col",{attrs:{span:24}},[r("a-form-model-item",{ref:"name",attrs:{label:e.$t("form.name"),prop:"name"}},[r("a-input",{on:{blur:function(){e.$refs.name.onFieldBlur()}},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1)],1),r("a-row",{attrs:{gutter:16}},[r("a-col",{attrs:{span:24}},[r("a-form-model-item",{attrs:{label:e.$t("form.des"),prop:"des"}},[r("a-textarea",{attrs:{rows:4},model:{value:e.form.des,callback:function(t){e.$set(e.form,"des",t)},expression:"form.des"}})],1)],1)],1),r("a-row",{attrs:{gutter:16}},[r("a-col",{attrs:{span:24}},[r("a-form-model-item",{attrs:{label:e.$t("form.extend"),prop:"extend"}},[r("a-textarea",{attrs:{rows:4},model:{value:e.form.extend,callback:function(t){e.$set(e.form,"extend",t)},expression:"form.extend"}})],1)],1)],1),r("a-row",{attrs:{gutter:16}},[r("a-col",{attrs:{span:24}},[r("a-form-model-item",{attrs:{label:e.$t("form.sort"),prop:"sort",extra:e.$t("form.sort_extra")}},[r("a-input-number",{model:{value:e.form.sort,callback:function(t){e.$set(e.form,"sort",t)},expression:"form.sort"}})],1)],1)],1),r("a-row",{attrs:{gutter:16}},[r("a-col",{attrs:{span:24}},[r("a-form-model-item",{attrs:{label:e.$t("form.status"),prop:"status"}},[r("a-radio-group",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.statuses,(function(t){return r("a-radio",{key:t.key,attrs:{value:t.key}},[e._v(" "+e._s(t.value)+" ")])})),1)],1)],1)],1)],1),r("div",{staticClass:"drawBottom"},[r("a-space",[r("a-button",{on:{click:e.resetForm}},[e._v(" "+e._s(e.$t("reset"))+" ")]),r("a-button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:e.submit}},[e._v(" "+e._s(e.$t("submit"))+" ")])],1)],1)],1)],1)])},n=[],s=(r("b0c0"),r("96cf"),r("c964")),o=r("f3f3"),i=r("0122"),u=r("dde5"),c={name:"Enum",i18n:r("58c8"),data:function(){var e=function(e,t,r){if("string"===typeof t)try{var a=JSON.parse(t);"object"==Object(i["a"])(a)&&a?r():r(new Error)}catch(n){r(new Error)}r(new Error)};return{items:[],page:1,per_page:10,columns:[{title:this.$t("form.column_name"),dataIndex:"name",width:400,scopedSlots:{customRender:"name"}},{title:this.$t("form.value"),dataIndex:"value",scopedSlots:{customRender:"common"}},{title:this.$t("form.sort"),dataIndex:"sort",width:100,scopedSlots:{customRender:"common"}},{title:this.$t("status"),dataIndex:"status",width:100,scopedSlots:{customRender:"status"}},{title:this.$t("action"),key:"action",fixed:"right",width:170,scopedSlots:{customRender:"action"}}],pagination:{},current:{},drawerVisible:!1,statuses:[],formInit:{parent_id:0,name:void 0,code:void 0,des:void 0,value_type:"string",value:void 0,extend:void 0,sort:0,status:1},form:{parent_id:0,name:void 0,code:void 0,des:void 0,value_type:"string",value:void 0,extend:void 0,sort:0,status:1},rules:{name:[{required:!1,message:"请输入名称",trigger:"blur"}],code:[{required:!0,message:"请输入编码",trigger:"blur"}],value_type:[{required:!1,message:"请选择值类型",trigger:"blur"}],value:[{required:!1,message:"请输入值内容",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}],extend:[{required:!1,validator:e,message:"请输入正确的 JSON",trigger:"blur"}]},submitLoading:!1,roots:[],valueTypes:[]}},mounted:function(){this.initIndex(),this.getStatuses(),this.getValueTypes()},methods:{handleTableChange:function(e){var t=Object(o["a"])({},this.pagination);t.current=e.current,this.pagination=t,this.index({page:e.current,per_page:e.pageSize})},index:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,u["h"].index(e);case 2:a=r.sent,t.items=a.data.data.items,n=Object(o["a"])({},t.pagination),n.total=a.data.data.total_count,t.pagination=n;case 7:case"end":return r.stop()}}),r)})))()},initIndex:function(){var e={page:this.page,per_page:this.per_page};this.index(e);var t=Object(o["a"])({},this.pagination);t.current=this.page,this.pagination=t},getStatuses:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u["h"].statuses();case 2:r=t.sent,0===r.data.code&&(e.statuses=r.data.data.items);case 4:case"end":return t.stop()}}),t)})))()},showAdd:function(){var e=arguments,t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:0,r.next=3,t.getRoots();case 3:t.drawerVisible=!0,t.$nextTick((function(){t.form=t.formInit,t.current={},t.$refs.drawerForm.resetFields(),t.form.parent_id=a}));case 5:case"end":return r.stop()}}),r)})))()},showEdit:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.getRoots();case 2:return r.next=4,u["h"].edit(e);case 4:a=r.sent,0===a.data.code?(n=a.data.data.res,n.extend=JSON.stringify(n.extend),t.drawerVisible=!0,t.$nextTick((function(){t.current=n,t.form=n,t.$refs.drawerForm.resetFields()}))):t.$message.error(a.data.msg?a.data.msg:t.$t("result.editError"));case 6:case"end":return r.stop()}}),r)})))()},submit:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.drawerForm.validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(r){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=16;break}if(e.submitLoading=!0,a={},!e.$emptyObj(e.current)){t.next=9;break}return t.next=6,u["h"].create(e.form);case 6:a=t.sent,t.next=12;break;case 9:return t.next=11,u["h"].update(e.current.id,e.form);case 11:a=t.sent;case 12:e.submitLoading=!1,0===a.data.code?(e.$message.success(e.$t("result.success")),e.drawerVisible=!1,e.initIndex()):e.$message.error(a.data.msg?a.data.msg:e.$t("result.error")),t.next=17;break;case 16:return t.abrupt("return",!1);case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},destroy:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,u["h"].destroy(e);case 2:a=r.sent,0===a.data.code?(t.$message.success(t.$t("result.success")),t.initIndex()):t.$message.error(a.data.msg?a.data.msg:t.$t("result.error"));case 4:case"end":return r.stop()}}),r)})))()},resetForm:function(){this.$refs.drawerForm.resetFields()},drawerClose:function(){this.drawerVisible=!1},getRoots:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u["h"].roots();case 2:r=t.sent,0===r.data.code&&(e.roots=r.data.data.items);case 4:case"end":return t.stop()}}),t)})))()},getValueTypes:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u["h"].valueTypes();case 2:r=t.sent,0===r.data.code&&(e.valueTypes=r.data.data.items);case 4:case"end":return t.stop()}}),t)})))()},nameFormat:function(e){var t=e.name?" / "+e.name:"";return e.code+t}}},d=c,l=(r("8704"),r("2877")),m=Object(l["a"])(d,a,n,!1,null,"4ac90f26",null),p=m.exports;t["default"]=p},"58c8":function(e,t){e.exports={messages:{CN:{addRoot:"添加根节点",form:{parent_id:"父节点",name:"名称",column_name:"编码/名称",code:"编码",des:"描述",value_type:"值类型",value:"值",status:"状态",sort:"排序",sort_extra:"数字越大越靠前",extend:"扩展"}},HK:{addRoot:"添加根节点",form:{parent_id:"父节点",name:"名称",column_name:"编码/名称",code:"编码",des:"描述",value_type:"值类型",value:"值",status:"状态",sort:"排序",sort_extra:"数字越大越靠前",extend:"扩展"}},US:{addRoot:"Add Root",form:{parent_id:"Parent Node",name:"Name",column_name:"Code/Name",code:"Code",des:"Description",value_type:"ValueType",value:"Value",status:"Status",sort:"sort",sort_extra:"bigger and the priority is higher",extend:"extend"}}}}},7536:function(e,t,r){},8704:function(e,t,r){"use strict";r("7536")}}]);